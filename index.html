<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Orgena Hub</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<style>
/* Reset & body */
*{box-sizing:border-box;margin:0;padding:0;}
body{font-family:'Roboto',sans-serif;background:#f5f6fa;color:#333;}

/* Header */
header{background:#1abc9c;color:white;padding:20px;display:flex;justify-content:space-between;align-items:center;}
header h1{font-weight:700;}
header nav button{margin-left:10px;padding:8px 15px;border:none;border-radius:5px;background:#16a085;color:white;font-weight:bold;cursor:pointer;transition:0.3s;}
header nav button:hover{background:#149174;}

/* Main layout */
main{max-width:1000px;margin:20px auto;padding:0 15px;}
#projects{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;}

/* Project card */
.project{background:white;border-radius:10px;box-shadow:0 3px 8px rgba(0,0,0,0.1);padding:15px;display:flex;flex-direction:column;transition:0.3s;}
.project:hover{transform:translateY(-3px);}
.project h3{margin-bottom:10px;color:#1abc9c;}
.code{background:#2c3e50;color:#ecf0f1;padding:10px;border-radius:8px;font-family:'Courier New',monospace;white-space:pre-wrap;overflow-x:auto;margin-bottom:10px;}
.stars, .comments, .actions{display:flex;flex-wrap:wrap;gap:10px;align-items:center;margin-bottom:5px;}
.star-btn{background:#e67e22;color:white;border:none;padding:5px 10px;border-radius:5px;cursor:pointer;font-weight:bold;transition:0.2s;}
.star-btn:hover{background:#cf711b;}
.comment-input{flex:1;padding:6px;border-radius:5px;border:1px solid #ccc;}
.comment-btn{padding:6px 12px;background:#2980b9;color:white;border:none;border-radius:5px;cursor:pointer;}
.comment-btn:hover{background:#1f5f8b;}
.delete-btn{padding:6px 12px;background:#c0392b;color:white;border:none;border-radius:5px;cursor:pointer;}
.delete-btn:hover{background:#992d22}

/* Post section */
#post-section{background:white;padding:15px;border-radius:10px;box-shadow:0 2px 6px rgba(0,0,0,0.1);margin-bottom:20px;}

/* Modal */
.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);justify-content:center;align-items:center;}
.modal-content{background:white;padding:20px;border-radius:10px;min-width:300px;max-width:400px;display:flex;flex-direction:column;}
.modal-content input{margin-bottom:10px;}
.modal-content button{margin-top:5px;}

/* Responsive */
@media(max-width:600px){.stars,.comments,.actions{flex-direction:column;align-items:stretch;}.comment-btn{width:100%;margin-top:5px;}}
</style>
</head>
<body>

<header>
<h1>Orgena Hub</h1>
<nav>
<button onclick="showProfile()">Profile</button>
<button onclick="showLogin()">Login/Register</button>
<button onclick="logout()" style="display:none;" id="logoutBtn">Logout</button>
</nav>
</header>

<main>
<div id="post-section" style="display:none;">
<h2>Post Your Orgena Code</h2>
<input id="title" placeholder="Project Title">
<textarea id="code" rows="6" placeholder="Paste your Orgena code here"></textarea>
<button onclick="postProject()">Post Project</button>
</div>

<h2>All Projects</h2>
<div id="projects"></div>
</main>

<!-- Login/Register Modal -->
<div class="modal" id="loginModal">
<div class="modal-content">
<h3>Login/Register</h3>
<input id="modalUsername" placeholder="Username">
<input id="modalPassword" placeholder="Password" type="password">
<button onclick="register()">Register</button>
<button onclick="login()">Login</button>
<button onclick="closeModal()">Close</button>
</div>
</div>

<!-- Profile Modal -->
<div class="modal" id="profileModal">
<div class="modal-content">
<h3>Your Profile</h3>
<p id="profileName"></p>
<h4>Your Projects</h4>
<div id="userProjects"></div>
<button onclick="closeProfile()">Close</button>
</div>
</div>

<script>
// ===== Storage =====
let currentUser = null;
let projects = [];

// ===== UI =====
function updateUI(){
  document.getElementById("logoutBtn").style.display = currentUser ? "inline-block" : "none";
  document.getElementById("post-section").style.display = currentUser ? "block" : "none";
}

// ===== Modals =====
function showLogin(){ document.getElementById("loginModal").style.display="flex"; }
function closeModal(){ document.getElementById("loginModal").style.display="none"; }
function showProfile(){ 
  if(!currentUser) return alert("Login first!");
  document.getElementById("profileName").innerText=`Username: ${currentUser}`;
  const userProjects = projects.filter(p=>p.user===currentUser);
  const container=document.getElementById("userProjects");
  container.innerHTML="";
  userProjects.forEach(p=>{
    const div=document.createElement("div");
    div.className="project";
    div.innerHTML=`<h4>${p.title}</h4><pre class="code">${p.code}</pre>
    <div class="actions"><button class="delete-btn" onclick='deleteProject(${p.id})'>Delete</button></div>`;
    container.appendChild(div);
  });
  document.getElementById("profileModal").style.display="flex";
}
function closeProfile(){document.getElementById("profileModal").style.display="none";}

// ===== Auth =====
function register(){
  const u=document.getElementById("modalUsername").value.trim();
  const p=document.getElementById("modalPassword").value;
  if(!u||!p){alert("Fill username/password");return;}
  currentUser=u; closeModal(); updateUI(); loadProjects();
}
function login(){
  const u=document.getElementById("modalUsername").value.trim();
  const p=document.getElementById("modalPassword").value;
  if(!u||!p){alert("Fill username/password");return;}
  currentUser=u; closeModal(); updateUI(); loadProjects();
}
function logout(){ currentUser=null; updateUI(); }

// ===== Projects =====
function postProject(){
  const title=document.getElementById("title").value.trim();
  const code=document.getElementById("code").value.trim();
  if(!title||!code){alert("Title and code required");return;}
  projects.push({id:Date.now(),title,code,user:currentUser,stars:[],comments:[]});
  document.getElementById("title").value=""; document.getElementById("code").value="";
  loadProjects();
}

function starProject(id){
  const proj=projects.find(p=>p.id===id);
  if(proj && currentUser && !proj.stars.includes(currentUser)) proj.stars.push(currentUser);
  loadProjects();
}

function addComment(id){
  const input=document.getElementById(`comment-${id}`);
  const text=input.value.trim();
  if(!text)return;
  const proj=projects.find(p=>p.id===id);
  if(proj) proj.comments.push({user:currentUser,text});
  input.value="";
  loadProjects();
}

function deleteProject(id){
  const idx=projects.findIndex(p=>p.id===id && p.user===currentUser);
  if(idx>=0){projects.splice(idx,1);}else{alert("Only owner can delete");}
  loadProjects();
}

// ===== Render =====
function loadProjects(){
  const container=document.getElementById("projects");
  container.innerHTML="";
  projects.slice().reverse().forEach(p=>{
    const div=document.createElement("div");
    div.className="project";
    div.innerHTML=`
      <h3>${p.title} by ${p.user}</h3>
      <pre class="code">${p.code}</pre>
      <div class="stars">
        <button class="star-btn" onclick='starProject(${p.id})'>‚≠ê ${p.stars.length}</button>
      </div>
      <div class="comments">
        ${p.comments.map(c=>`<p><b>${c.user}:</b> ${c.text}</p>`).join("")}
        ${currentUser?`<input class="comment-input" id="comment-${p.id}" placeholder="Add a comment">
        <button class="comment-btn" onclick='addComment(${p.id})'>Comment</button>`:""}
      </div>
      ${currentUser===p.user?`<button class="delete-btn" onclick='deleteProject(${p.id})'>Delete Project</button>`:""}
    `;
    container.appendChild(div);
  });
}

// Init
updateUI();
loadProjects();
</script>

</body>
</html>
